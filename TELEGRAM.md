# –î–æ—Å—Ç—É–ø –±–æ–µ–≤–æ–≥–æ —á–∞—Ç–∞ –ø–æ Telegram (webhook)

–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Telegram ‚Äî **webhook**: –≤—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç–µ —É Telegram —Å—Å—ã–ª–∫—É –Ω–∞ –Ω–∞—à POST-–º–µ—Ç–æ–¥, Telegram –ø—Ä–∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö —à–ª—ë—Ç —Ç—É–¥–∞ POST, –º—ã —Å—á–∏—Ç–∞–µ–º –æ—Ç–≤–µ—Ç –±–æ–µ–≤–æ–≥–æ —á–∞—Ç–∞ –∏ **–æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ Telegram** –æ–¥–Ω–∏–º –∏—Å—Ö–æ–¥—è—â–∏–º –∑–∞–ø—Ä–æ—Å–æ–º –∫ API Telegram (`sendMessage`). –î–ª—è —ç—Ç–æ–≥–æ –∏—Å—Ö–æ–¥—è—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —Å–∏—Å—Ç–µ–º–µ –Ω—É–∂–µ–Ω **—Ç–æ–∫–µ–Ω –±–æ—Ç–∞** (–∏–Ω–∞—á–µ Telegram –Ω–µ –ø—Ä–∏–º–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É –æ—Ç –∏–º–µ–Ω–∏ –±–æ—Ç–∞).

## –®–∞–≥–∏

1. **–°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞** –≤ [@BotFather](https://t.me/BotFather) (`/newbot`), —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å **—Ç–æ–∫–µ–Ω**.
2. **–í –∫–∞–±–∏–Ω–µ—Ç–µ ‚Üí –ü—Ä–æ—Ñ–∏–ª—å:**
   - –í –±–ª–æ–∫–µ **¬´–°—Å—ã–ª–∫–∞ –¥–ª—è Telegram (webhook)¬ª** –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è URL –≤–∏–¥–∞  
     `https://–í–ê–®_–î–û–ú–ï–ù/api/v1/tenants/by-slug/{slug}/telegram/webhook`  
     (–Ω–∞–ø—Ä–∏–º–µ—Ä `.../by-slug/u0cbbedb980f3/telegram/webhook`). –ù–∞–∂–º–∏—Ç–µ **¬´–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å¬ª**.
   - –í –ø–æ–ª–µ **¬´–¢–æ–∫–µ–Ω –±–æ—Ç–∞ Telegram¬ª** –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –æ—Ç BotFather –∏ –Ω–∞–∂–º–∏—Ç–µ **¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å¬ª**.
3. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å webhook –≤ Telegram:**  
   –í –±—Ä–∞—É–∑–µ—Ä–µ –∏–ª–∏ —á–µ—Ä–µ–∑ curl (–ø–æ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–π —Ç–æ–∫–µ–Ω –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π URL):
   ```text
   https://api.telegram.org/bot<–í–ê–®_–¢–û–ö–ï–ù>/setWebhook?url=<–í–°–¢–ê–í–¨–¢–ï_–°–ö–û–ü–ò–†–û–í–ê–ù–ù–£–Æ_–°–°–´–õ–ö–£>
   ```
   –ü—Ä–∏–º–µ—Ä:  
   `https://api.telegram.org/bot123456:AAH.../setWebhook?url=https://your-domain.com/api/v1/tenants/by-slug/u0cbbedb980f3/telegram/webhook`
4. –°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ **HTTPS** (–¥–ª—è webhook Telegram –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–æ–ª—å–∫–æ HTTPS).

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–∏—à—É—Ç –±–æ—Ç—É –≤ Telegram ‚Äî –æ—Ç–≤–µ—Ç—ã –æ—Ç–¥–∞—ë—Ç —Ç–æ—Ç –∂–µ –±–æ–µ–≤–æ–π —á–∞—Ç (–ø—Ä–æ–º–ø—Ç, MCP, –¥–∏–∞–ª–æ–≥–∏), —á—Ç–æ –∏ –Ω–∞ —Å–∞–π—Ç–µ.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

–í `.env` –∑–∞–¥–∞—Ç—å **–ø—É–±–ª–∏—á–Ω—ã–π URL API** (–ø–æ –Ω–µ–º—É Telegram —à–ª—ë—Ç POST):

- **`PUBLIC_API_BASE_URL`** ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä `https://your-domain.com` (–±–µ–∑ —Å–ª—ç—à–∞ –≤ –∫–æ–Ω—Ü–µ).  
  –ï—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **`FRONTEND_BASE_URL`**.

–°—Å—ã–ª–∫–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ: `{PUBLIC_API_BASE_URL –∏–ª–∏ FRONTEND_BASE_URL}/api/v1/tenants/by-slug/{slug}/telegram/webhook` (slug —Ç–µ–Ω–∞–Ω—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä `u0cbbedb980f3`).

## –ß—Ç–æ –µ—Å—Ç—å –≤ –±—ç–∫–µ–Ω–¥–µ

- **POST** `/api/v1/tenants/by-slug/{slug}/telegram/webhook` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è Telegram (slug —Ç–µ–Ω–∞–Ω—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä `u0cbbedb980f3`). –≠—Ç—É —Å—Å—ã–ª–∫—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å –∫–∞–±–∏–Ω–µ—Ç–∞.  
  Telegram —à–ª—ë—Ç —Å—é–¥–∞ POST —Å —Ç–µ–ª–æ–º [Update](https://core.telegram.org/bots/api#update). –ú—ã –∏–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è, –ø–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç –±–æ–µ–≤–æ–≥–æ —á–∞—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –µ–≥–æ –≤ —á–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤ Telegram API `sendMessage` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –±–æ—Ç–∞).  
  –¢–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–µ–Ω –≤–∞—Ä–∏–∞–Ω—Ç –ø–æ UUID: `POST .../tenants/{tenant_id}/telegram/webhook`.

## –ò—Ç–æ–≥

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å |
|-----------|--------|
| Webhook POST | ‚úÖ `POST .../telegram/webhook` |
| –°—Å—ã–ª–∫–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ + ¬´–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å¬ª | ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å ‚Üí ¬´–°—Å—ã–ª–∫–∞ –¥–ª—è Telegram¬ª |
| –¢–æ–∫–µ–Ω –±–æ—Ç–∞ (–¥–ª—è sendMessage) | ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å ‚Üí ¬´–¢–æ–∫–µ–Ω –±–æ—Ç–∞ Telegram¬ª |
| –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è URL –≤ Telegram | üî≤ –≤—ã–∑–≤–∞—Ç—å `setWebhook?url=...` |
| HTTPS | üî≤ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω |
